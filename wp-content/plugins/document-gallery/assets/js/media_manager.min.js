var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,g,a){b instanceof String&&(b=String(b));for(var f=b.length,e=0;e<f;e++){var c=b[e];if(g.call(a,c,e,b))return{i:e,v:c}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,g,a){b!=Array.prototype&&b!=Object.prototype&&(b[g]=a.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,g,a,f){if(g){a=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var e=b[f];e in a||(a[e]={});a=a[e]}b=b[b.length-1];f=a[b];g=g(f);g!=f&&null!=g&&$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3");
(function(b,g){if("function"===typeof wp.media.collection){var a=wp.media;var f=a.view.l10n="undefined"===typeof _wpMediaViewsL10n?{}:_wpMediaViewsL10n;jQuery.extend(f,DGl10n);a.controller.dgEdit=a.controller.Library.extend({defaults:{id:"dg-edit",title:f.editdgTitle,multiple:!1,searchable:!1,date:!1,sortable:!0,display:!1,content:"browse",toolbar:"dg-edit",describe:!0,displaySettings:!0,dragInfo:!0,idealColumnWidth:170,editing:!1,priority:60,syncSelection:!1},initialize:function(){this.get("library")||
this.set("library",new a.model.Selection);this.get("AttachmentView")||this.set("AttachmentView",a.view.Attachment.EditLibrary);a.controller.Library.prototype.initialize.apply(this,arguments)},activate:function(){this.get("library");this.get("library").observe(wp.Uploader.queue);this.frame.on("content:render:browse",this.dgSettings,this);a.controller.Library.prototype.activate.apply(this,arguments)},deactivate:function(){this.get("library").unobserve(wp.Uploader.queue);this.frame.off("content:render:browse",
this.dgSettings,this);a.controller.Library.prototype.deactivate.apply(this,arguments)},dgSettings:function(c){if(this.get("displaySettings")){var d=this.get("library");d&&c&&(d.dg=d.dg||new Backbone.Model,c.sidebar.set({dg:new a.view.Settings.dg({controller:this,model:d.dg,priority:40})}),c.toolbar.set("reverse",{text:f.reverseOrder,priority:80,click:function(){d.reset(d.toArray().reverse())}}))}}});a.controller.dgAdd=a.controller.Library.extend({defaults:g.defaults({id:"dg-library",title:f.addTodgTitle,
multiple:"add",filterable:"uploaded",menu:"dg",toolbar:"dg-add",priority:100,syncSelection:!1},a.controller.Library.prototype.defaults),initialize:function(){this.get("library")||this.set("library",a.query());a.controller.Library.prototype.initialize.apply(this,arguments)},activate:function(){var c=this.get("library"),d=this.frame.state("dg-edit").get("library");this.editLibrary&&this.editLibrary!==d&&c.unobserve(this.editLibrary);c.validator=function(c){return!!this.mirroring.get(c.cid)&&!d.get(c.cid)&&
a.model.Selection.prototype.validator.apply(this,arguments)};c.reset(c.mirroring.models,{silent:!0});c.observe(d);this.editLibrary=d;a.controller.Library.prototype.activate.apply(this,arguments)}});a.view.Settings.dg=a.view.Settings.extend({update:function(a){var d=this.model.get(a),c=this.$('[data-setting="'+a+'"]');c.length&&(c.is("select")?(d=c.find('[value="'+d+'"]'),d.length?(c.find("option").prop("selected",!1),d.prop("selected",!0)):this.model.set(a,c.find(":selected").val())):c.hasClass("button-group")?
(a=c.find("button").removeClass("active"),a.filter('[value="'+d+'"]').addClass("active")):c.is('input[type="text"], input[type="number"], textarea')?c.is(":focus")||c.val(d):c.is('input[type="checkbox"]')&&c.prop("checked",!!d&&"false"!==d))},className:"collection-settings dg-settings",template:a.template("dg-settings")});var e=wp.media.view.MediaFrame.Post;wp.media.view.MediaFrame.Post=e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments);this.states.add([new a.controller.Library({id:"dg",
title:f.dgMenuTitle,priority:50,toolbar:"main-dg",filterable:"all",multiple:"add",editable:!1,library:a.query(this.options.library)}),new a.controller.dgEdit({library:this.options.selection,editing:this.options.editing,menu:"dg"}),new a.controller.dgAdd]);this.on("menu:create:dg",this.createMenu,this);this.on("toolbar:create:main-dg",this.createToolbar,this);this.on("menu:render:dg",this.dgMenu,this);this.on("toolbar:render:main-dg",this.maindgToolbar,this);this.on("toolbar:render:dg-edit",this.dgEditToolbar,
this);this.on("toolbar:render:dg-add",this.dgAddToolbar,this)},dgMenu:function(c){var d=this.lastState(),b=d&&d.id,e=this;c.set({cancel:{text:f.canceldgTitle,priority:20,click:function(){b?e.setState(b):e.close();this.controller.modal.focusManager.focus()}},separateCancel:new a.View({className:"separator",priority:40})})},maindgToolbar:function(c){var d=this;this.selectionStatusToolbar(c);c.set("dg",{style:"primary",text:f.dgButton,priority:60,requires:{selection:!0},click:function(){var c=d.state().get("selection");
d.state("dg-edit").set("library",new a.model.Selection(c.models,{props:c.props.toJSON(),multiple:!0}));this.controller.setState("dg-edit");this.controller.modal.focusManager.focus()}})},dgEditToolbar:function(){var c=this.state().get("editing");this.toolbar.set(new a.view.Toolbar({controller:this,items:{insert:{style:"primary",text:c?f.updatedg:f.insertdg,priority:80,requires:{library:!0},click:function(){var a=this.controller,b=a.state();a.close();c?b.trigger("update",b.get("library")):wp.media.editor.insert(wp.media.dg.shortcode(b.get("library")).string().replace(/\sdgorder=/ig,
" order=").replace(/\sdgorderby=/ig," orderby="));a.setState(a.options.state);a.reset();"undefined"!=typeof tinyMCE&&null!==tinyMCE.activeEditor&&tinyMCE.activeEditor.fire("update.dg")}}}}))},dgAddToolbar:function(){this.toolbar.set(new a.view.Toolbar({controller:this,items:{insert:{style:"primary",text:f.addTodg,priority:80,requires:{selection:!0},click:function(){var a=this.controller,b=a.state();a.state("dg-edit").get("library").add(b.get("selection").models);b.trigger("reset");a.setState("dg-edit")}}}}))}});
wp.media._dgDefaults={id:wp.media.view.settings.post&&wp.media.view.settings.post.id,columns:dgDefaults.columns,fancy:dgDefaults.fancy,relation:dgDefaults.relation,limit:dgDefaults.limit,mime_types:dgDefaults.mime_types,post_status:dgDefaults.post_status,post_type:dgDefaults.post_type,attachment_pg:dgDefaults.attachment_pg,descriptions:dgDefaults.descriptions,new_window:dgDefaults.new_window,paginate:dgDefaults.paginate,dgorder:dgDefaults.order,dgorderby:dgDefaults.orderby};wp.media.dgDefaults=wp.media.view.settings.dgDefaults?
g.extend({},wp.media._dgDefaults,wp.media.view.settings.dgDefaults):wp.media._dgDefaults;wp.media.dg=new wp.media.collection({tag:"dg",editTitle:wp.media.view.l10n.editdgTitle,defaults:wp.media.dgDefaults,setDefaults:function(a){var c=this,b=!g.isEqual(wp.media.dgDefaults,wp.media._dgDefaults);g.each(this.defaults,function(d,e){a[e]=c.coerce(a,e);d!==a[e]||b&&d!==wp.media._dgDefaults[e]||delete a[e]});return a}})}})(jQuery,_);
"undefined"!==typeof window.wp.mce&&"undefined"!==typeof window.wp.mce.views&&function(b,g,a,f){base={state:[],edit:function(b,c){if(-1==b.search(/\sids\s*=/gi)||-1<b.search(/\s(?!(?:ids|attachment_pg|columns|new_window|descriptions|fancy|orderby|order|paginate|limit)\s*=)[\w\-]+\s*=/gi))tinyMCE.activeEditor.windowManager.alert(DGl10n.unfitSCalert);else{var d=this.type,e=a[d].edit(b.replace(/\sorder\s*=/ig," dgorder=").replace(/\sorderby\s*=/ig," dgorderby="));this.pausePlayers&&this.pausePlayers();
_.each(this.state,function(b){e.state(b).on("update",function(b){c(a[d].shortcode(b).string().replace(/\sdgorder=/ig," order=").replace(/\sdgorderby=/ig," orderby="),"dg"===d)})});e.on("close",function(){e.detach()});e.open()}}};b=_.extend({},base,{state:["dg-edit"],template:a.template("editor-dg"),initialize:function(){a.dg.attachments(this.shortcode,a.view.settings.post.id);var b=this.shortcode.attrs.named,c=this.text,d={};for(prop in b)-1<c.indexOf(" "+prop+"=")&&(d[prop]=b[prop]);-1<c.indexOf(" dgorderby=")&&
(d.orderby=b.dgorderby);-1<c.indexOf(" dgorder=")&&(d.order=b.dgorder);this.render('<div data-shortcode="'+encodeURIComponent(JSON.stringify(d))+'"><div class="loading-placeholder"><div class="dashicons dashicons-admin-media"></div><div class="wpview-loading"><ins></ins></div></div></div>')}});g.register("dg",_.extend({},b))}(window,window.wp.mce.views,window.wp.media,window.jQuery);
