var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,e,d){b instanceof String&&(b=String(b));for(var f=b.length,c=0;c<f;c++){var m=b[c];if(e.call(d,m,c,b))return{i:c,v:m}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,d){b!=Array.prototype&&b!=Object.prototype&&(b[e]=d.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,e,d,f){if(e){d=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var c=b[f];c in d||(d[c]={});d=d[c]}b=b[b.length-1];f=d[b];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");
jQuery(document).ready(function(){function b(a){a=a||event;if(a.dataTransfer.types)for(var b=0;b<a.dataTransfer.types.length;b++)if("Files"==a.dataTransfer.types[b]){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect="none";break}}function e(a){a=a||event;if(a.originalEvent.dataTransfer.types)for(var b=0;b<a.originalEvent.dataTransfer.types.length;b++)if("Files"==a.originalEvent.dataTransfer.types[b])return a.stopPropagation(),a.preventDefault(),a.originalEvent.dataTransfer.dropEffect=
"move",!1}function d(a){a=a||event;if(a.originalEvent.dataTransfer.types)for(var b=0;b<a.originalEvent.dataTransfer.types.length;b++)if("Files"==a.originalEvent.dataTransfer.types[b]){this.classList.add("dragover");l[jQuery(this).data("entry")]=l[jQuery(this).data("entry")].add(jQuery(a.target));break}}function f(a){a=a||event;if(a.originalEvent.dataTransfer.types)for(var b=0;b<a.originalEvent.dataTransfer.types.length;b++)if("Files"==a.originalEvent.dataTransfer.types[b]){l[jQuery(this).data("entry")]=
l[jQuery(this).data("entry")].not(a.target);0===l[jQuery(this).data("entry")].length&&this.classList.remove("dragover");break}}function c(a){a=a||event;if(a.originalEvent.dataTransfer.types)for(var b=0;b<a.originalEvent.dataTransfer.types.length;b++)if("Files"==a.originalEvent.dataTransfer.types[b]){a.stopPropagation();a.preventDefault();n(a.originalEvent.dataTransfer.files,jQuery(this).data("entry"));l[jQuery(this).data("entry")]=jQuery();this.classList.remove("dragover");break}}function m(a){a=
a||event;n(a.target.files,jQuery(this).closest("tr").data("entry"))}function n(a,b){for(var h=0,k;k=a[h];h++)if(0==k.type.indexOf("image/")&&"undefined"!=typeof dg_admin_vars.upload_limit&&k.size<=parseInt(dg_admin_vars.upload_limit)){var d=jQuery("[data-entry="+b+"]"),h=new FormData(d.closest("form")[0]);var e=jQuery("#thumbnail-management-tab");e.length?e=e.attr("action"):(e=ajaxurl,h.append("action","dg_upload_thumb"));h.append("document_gallery[entry]",b);h.append("document_gallery[ajax]","true");
h.append("document_gallery[upload]","true");h.append("file",k);var g=new XMLHttpRequest;g.open("POST",e);var f=d.find(".column-icon img"),c=d.find(".progress > *:first");g.onreadystatechange=function(){if(4==g.readyState){if(200==g.status&&-1==g.responseText.indexOf("\n")){jQuery(c).parent().addClass("success");var a=jQuery.parseJSON(g.responseText);a.result&&(a.url===f.attr("src")?f.attr("src",f.attr("src")+"?"+(new Date).getTime()):f.attr("src",a.url))}else jQuery(c).parent().addClass("fail"),console.log("Invalid response from server:"),
console.log(g.responseText);setTimeout(function(){d.find(".column-thumbupload > *").toggleClass("invis");jQuery(c).parent().removeClass("success fail")},5E3)}};g.onload=function(){c.width("100%")};g.upload.onprogress=function(a){a.lengthComputable&&c.width((a.loaded/a.total*100|0)+"%")};c.width(0);d.find(".column-thumbupload > *").toggleClass("invis");g.send(h);break}else console.log("Attempt to upload improper file %c"+k.name+":","font-weight:bold;"),0!=k.type.indexOf("image/")&&console.log("\tIs not an image - "+
k.type),"undefined"!=typeof dg_admin_vars.upload_limit&&k.size>parseInt(dg_admin_vars.upload_limit)&&console.log("\tIs too big - "+k.size+"b; (Limit is "+dg_admin_vars.upload_limit+"b)")}function p(a){for(var b=4,d=0;6>d;d++)a.animate({"margin-left":"+="+(b=-b)+"px"},50)}jQuery(".cb-ids").change(function(){jQuery(this).is(":checked")?jQuery(this).closest("tr").addClass("selected"):jQuery(this).closest("tr").removeClass("selected")});jQuery("th input:checkbox").change(function(){jQuery(this).is(":checked")?
jQuery("#ThumbsTable tbody tr").addClass("selected"):jQuery("#ThumbsTable tbody tr").removeClass("selected")});jQuery("input.current-page").bind("keypress",{},function(a){13==(a.keyCode?a.keyCode:a.which)&&(a.preventDefault(),jQuery(location).attr("href","?"+jQuery.param(jQuery.extend(URL_params,{sheet:this.value}))))});jQuery("select.limit_per_page").change(function(){jQuery(location).attr("href","?"+jQuery.param(jQuery.extend(URL_params,{limit:this.value})))});jQuery("#thumbnail-management-tab").submit(function(a){a.preventDefault();
if(0<jQuery(".cb-ids:checked").length){a=jQuery(this).attr("action");var b=jQuery(this).serialize()+"&document_gallery%5Bajax%5D=true&document_gallery%5Bcleanup%5D=true";jQuery(".deleteSelected").addClass("waiting").attr("disabled","disabled");jQuery.post(a,b,function(a){if(a.result){a=a.deleted;for(var b in a)jQuery("input[type=checkbox][value="+a[b]+"]").closest("tr").fadeOut("slow",0,function(){jQuery(this).slideUp("slow",function(){jQuery(this).remove()})})}jQuery(".deleteSelected").removeClass("waiting").removeAttr("disabled")}).fail(function(){console.log("Problem in reaching the server");
jQuery(".deleteSelected").removeClass("waiting").removeAttr("disabled")})}return!1});jQuery("#advanced-tab #options-dump").click(function(){jQuery(this).select()});jQuery(".expander").click(function(){getSelection().toString()||(jQuery(this).next().slideToggle("slow"),jQuery(this).find(".dashicons").toggleClass("dashicons-arrow-down-alt2 dashicons-arrow-up-alt2"),jQuery(this).toggleClass("expander collapser"),jQuery(this).attr("title",jQuery(this).hasClass("expander")?"Click to Expand":"Click to Collapse"))});
jQuery(".spoiler-body").length&&(jQuery(".expandAll, .collapseAll").addClass("button"),jQuery(".expandAll").click(function(a){a.preventDefault();jQuery(".expander").trigger("click")}),jQuery(".collapseAll").click(function(a){a.preventDefault();jQuery(".collapser").trigger("click")}));jQuery(".levelSelector input").change(function(){"all"==jQuery(this).val()?(jQuery(".levelSelector input").not("[value='all']").prop("checked",jQuery(this).is(":checked")),jQuery(this).is(":checked")?jQuery("#LogTable tbody tr").show():
jQuery("#LogTable tbody tr").hide()):(jQuery(this).is(":checked")?jQuery("#LogTable tbody tr:has(span."+jQuery(this).val()+")").show():jQuery("#LogTable tbody tr:has(span."+jQuery(this).val()+")").hide(),jQuery(".levelSelector input:checked").not("[value='all']").length+1==jQuery('.levelSelector input[type="checkbox"]').length?jQuery('.levelSelector input[value="all"]').prop("checked",!0):jQuery('.levelSelector input[value="all"]').prop("checked",!1))});jQuery("#LogTable .manage-column.column-date").click(function(){jQuery(this).toggleClass("asc desc");
var a=jQuery("#LogTable > tbody"),b=a.children("tr");a.append(b.get().reverse())});window.addEventListener("dragover",b,!1);window.addEventListener("drop",b,!1);var l={};jQuery("#ThumbsTable tbody tr").each(function(){jQuery(this).on("dragenter",d).on("dragover",e).on("dragleave",f).on("drop",c);l[jQuery(this).data("entry")]=jQuery();jQuery(this).find("input:button").on("click",function(){jQuery(this).prevAll("input:file").click()});jQuery(this).find("input:file").on("change",m)});"draggable"in document.createElement("span")||
jQuery(".html5dndmarker").hide();jQuery("td .dashicons-edit").click(function(){var a=jQuery(this).closest("td");if(a.hasClass("column-title")){if("none"==a.find("a").css("display"))return;a.find("a").hide().after('<input type="text" value="'+a.find(".editable-title").text()+'">');a.find("input").focus()}else if(a.hasClass("column-description")){if("none"==a.find(".editable-description").css("display"))return;a.find(".editable-description").hide().after("<textarea>"+a.find(".editable-description").html()+
"</textarea>");a.find("textarea").focus()}else return;jQuery(this).css("visibility","hidden");a.find(".edit-controls").show()});jQuery(".edit-controls .dashicons-no").click(function(){var a=jQuery(this).closest("td");if(a.hasClass("column-title")){if("none"!=a.find("a").css("display"))return;a.find("input").fadeOut("fast",function(){jQuery(this).remove();a.find("a").fadeIn("fast")})}else if(a.hasClass("column-description")){if("none"!=a.find(".editable-description").css("display"))return;a.find("textarea").fadeOut("fast",
function(){jQuery(this).remove();a.find(".editable-description").fadeIn("fast")})}else return;jQuery(this).closest(".edit-controls").hide();a.find(".dashicons-edit").css("visibility","visible")});jQuery(".edit-controls .dashicons-yes").click(function(){var a=jQuery(this).closest("td"),b=jQuery(this).closest("tr").data("entry"),d=jQuery("#thumbnail-management-tab").attr("action"),e=new FormData(jQuery("[data-entry="+b+"]").closest("form")[0]);e.append("document_gallery[entry]",b);e.append("document_gallery[ajax]",
"true");if(a.hasClass("column-title")){var c=a.find("input");var f=a.find(".editable-title");e.append("document_gallery[title]",encodeURIComponent(c.val()))}else if(a.hasClass("column-description"))c=a.find("textarea"),f=a.find(".editable-description"),e.append("document_gallery[description]",encodeURIComponent(c.val()));else return;if(c.val()==f.text()||a.hasClass("column-description")&&c.val()==f.html())jQuery(this).next(".dashicons-no").click();else{var g=new XMLHttpRequest;g.open("POST",d);g.onreadystatechange=
function(){4==g.readyState&&(a.addClass("trans"),a.find(".edit-controls").removeClass("waiting"),-1==g.responseText.indexOf("\n")?jQuery.parseJSON(g.responseText).result?(a.hasClass("column-description")?f.html(c.val()):f.text(c.val()),a.find(".dashicons-no").click(),a.addClass("responseSuccess").delay(2E3).queue(function(){jQuery(this).removeClass("responseSuccess").dequeue()}).delay(1100).queue(function(){jQuery(this).removeClass("trans").dequeue()})):(p(c),a.addClass("responseFail").delay(1100).queue(function(){jQuery(this).removeClass("responseFail").dequeue()}).delay(1100).queue(function(){jQuery(this).removeClass("trans").dequeue()})):
(p(c),a.addClass("responseFail").delay(1100).queue(function(){jQuery(this).removeClass("responseFail").dequeue()}).delay(1100).queue(function(){jQuery(this).removeClass("trans").dequeue()}),console.log("Invalid response from server:"),console.log(g.responseText)))};jQuery(this).closest(".edit-controls").addClass("waiting");g.send(e)}})});
